<!-- modules/editor.html
  Corrected editor module HTML — ensures the container and canvas IDs expected by editor.js:
  - container id="canvas-wrap"
  - canvas id="canvas"
  Also keeps legacy IDs used by other variants (ed-canvas) so either editor script can find the elements.
-->
<div class="module-editor">
  <header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
    <h2>Editor UX / UI</h2>
    <div>
      <button id="editor-new-artboard" class="btn">Nuevo Artboard</button>
      <button id="editor-export" class="btn">Exportar</button>
    </div>
  </header>

  <div style="display:flex;gap:12px">
    <aside style="width:260px;background:#fff;padding:12px;border-radius:8px;color:#111">
      <h4>Herramientas</h4>
      <div>
        <button id="btn-add-rect" class="btn small">Rect</button>
        <button id="btn-add-text" class="btn small">Texto</button>

        <!-- legacy ids kept for alternate editor.js versions -->
        <button id="ed-btn-rect" class="btn small" style="display:none">Rect (legacy)</button>
        <button id="ed-btn-text" class="btn small" style="display:none">Texto (legacy)</button>

        <input id="editor-image-input" type="file" accept="image/*" style="display:none" />
        <button id="btn-upload-image" class="btn small">Imagen</button>
        <button id="ed-btn-image" class="btn small" style="display:none">Imagen (legacy)</button>

        <hr/>
        <label>Tolerancia BG <input id="bg-tolerance" type="range" min="5" max="120" value="32" /></label>
        <button id="btn-remove-bg" class="btn small">Quitar fondo</button>
      </div>
    </aside>

    <main style="flex:1;background:#fff;padding:12px;border-radius:8px;color:#111">
      <!-- IMPORTANT: IDs expected by editor.js -->
      <div id="canvas-wrap" style="height:520px;border:1px solid #e6e6e6;border-radius:6px;display:flex;align-items:center;justify-content:center;position:relative">
        <!-- primary canvas id used by editor.js -->
        <canvas id="canvas" width="900" height="520" style="background:#ffffff; display:block;"></canvas>

        <!-- keep legacy canvas id (some editor variants use 'editor-canvas') -->
        <canvas id="editor-canvas" width="900" height="520" style="display:none;"></canvas>

        <!-- heatmap / overlays -->
        <canvas id="ed-heatmap-overlay" class="heatmap-overlay" style="position:absolute;left:0;top:0;pointer-events:none;"></canvas>
      </div>

      <div style="margin-top:8px">
        <button id="btn-save-json" class="btn small">Guardar JSON</button>
        <button id="btn-load-json" class="btn small">Cargar JSON</button>
        <input id="editor-file-json" type="file" accept="application/json" style="display:none" />
      </div>
    </main>

    <aside style="width:320px;background:#fff;padding:12px;border-radius:8px;color:#111">
      <h4>Inspector</h4>
      <div>
        <label>Texto <input id="ins-text" /></label>
        <label>Fill <input id="ins-fill" type="color" /></label>
        <label>Stroke <input id="ins-stroke" type="color" /></label>
        <label>Tamaño fuente <input id="ins-fontsize" type="number" /></label>
        <label>Opacidad <input id="ins-opacity" type="range" min="0" max="1" step="0.01" /></label>
      </div>

      <hr/>
      <h4>Component Library</h4>
      <div id="components-list" style="max-height:160px;overflow:auto"></div>
      <div style="margin-top:8px">
        <button id="ed-tool-component" class="btn small">Crear componente</button>
        <button id="ed-tool-instance" class="btn small">Insertar componente</button>
      </div>

      <hr/>
      <h4>Comments</h4>
      <div id="comments-list" style="max-height:120px;overflow:auto"></div>
      <textarea id="comment-box" rows="3" style="width:100%;margin-top:8px"></textarea>
      <button id="comment-add" class="btn small" style="margin-top:6px">Agregar comentario</button>
    </aside>
  </div>
</div>
